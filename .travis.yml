language: node_js
node_js:
- node
after_success:
- npm run coveralls
before_deploy:
- deployment-scripts/before-deploy.sh
- deployment-scripts/create-zip.sh
deploy:
  - provider: s3
    access_key_id:
      secure: Yazy6j1OVxhrGC4mONSpSZFCXCiVB6YD6yhtZdNghTaNtz6z1aATrU6h0iRXAJXzt7B5H5PX09j0WQxS7Ds4b1bI3FNhmOQXFfrwBOeu/pZCzjSs2H+kVZzC5b7K+RLcF6oHQKPOEZQZH5z7sykwYxY+i/rVqBjsvCtfROkKQwlufUjtJ01RqrLh83aEsyFhDyuPf/sI9XuxrHOcgMUUbamr/WE0fG8fii0zdA3S1lGT4C2M0yD/FM9++vrO0rosSUo79qDJsIDmr40d/T+cq2T2QcmpoKfGMSdyeSRkZ2kAhH0g8KVBPnACmkrVfzxISmLHwYEI9Un/mNBQF/0fu0zBDmvn1R3u1nIqcwoXu3vQbzEfrnYzyP0PQe4W2/XX4eDbJhdNbNHoJ/M3Ig8z234QSp/EDR/5aEjAepGJCA81eX/FsTyO6l2np4b/G1/oxb7RFHlMZRN+CvMt3F2U9OjD7OCv2SXpGX4c96oPQlIPCX3SxRwcZdfPzHI2H4nVk6K/6zQIPAGqLrIqb053voTiTCu63jbPsekt6RIBMuFXxJXlupQgcNCjPxyb6Ehykm4N3iKShVyr6hAzCtseePfMnXXyKU9DjGpUhphYfKZ3YLkREvqSEqQYXVoyt4mYfUYeB74m+F7D9Z2giYF/GLbxlZsPEYboKrR2SSjXNTA=
    secret_access_key:
      secure: sruKlXThOD5+V8ANO8LmVMBlOfgBZH51sZeVgx/oOo6pXiOjLr9mLWT39B/90njGOuI4F+CTqUppqjBb3vaU9wF02pAo80/K5u1f9DRSt+expsCCOKcdZv6FfaqPAqNNyV6sCgL17s/SEA6ep2tFKpXOK8ElNCIWlEz7/jLPYAViYtCKSMAayJY7mAjakoe3gBtuRqUbEL/7vBBt6If9GAKx4pzgJnOTrOQqJi7tCFc3bKOGR9i2pgtZy/pe2LiKC4nfU+QjuMELV36AVlHycbU1me2dsfkm2O3TIelKMrM8Ijjqf8x5QPbjHQCVqLxd12x/XysgCLy1PIermLhzLba2QB3KKH/nz6dYfCA4Unubn5JhinlGa9YSykOhel/7K7eBAg4nOBS5UhmVs3stvGxKmLNXLNnThyIb1DuiNrDldvJ/uT/QObNU7Oy8gR3qDWCvFJ6x8lOeWRu5XPHaV6tBshpE+GNp4QQl8sVj2QH86Bv2+cgr9SYJUcXpWfJSPSuWNpEhJ0Obhx5gKF9ma+5bDpH8faTuZkcJUdsduGOgr+o0Vj3GVxd5gnmi51cGw6kWMSzXdl0RS+9xbhSGiDQfA2Se9Mua50OEYxmjt2QxYRLmP/onBafv+vGib08nPloD3R1JxBl0ugdKp3WuDYhPip+9n9erQWG+nRbPvWw=
    bucket: amos-deploy-dev
    skip_cleanup: true
    region: eu-west-1
    local-dir: deployment-build
    on:
      all_branches: true
      condition: $TRAVIS_BRANCH = dev || $TRAVIS_BRANCH = master
  - provider: codedeploy
    access_key_id:
      secure: Yazy6j1OVxhrGC4mONSpSZFCXCiVB6YD6yhtZdNghTaNtz6z1aATrU6h0iRXAJXzt7B5H5PX09j0WQxS7Ds4b1bI3FNhmOQXFfrwBOeu/pZCzjSs2H+kVZzC5b7K+RLcF6oHQKPOEZQZH5z7sykwYxY+i/rVqBjsvCtfROkKQwlufUjtJ01RqrLh83aEsyFhDyuPf/sI9XuxrHOcgMUUbamr/WE0fG8fii0zdA3S1lGT4C2M0yD/FM9++vrO0rosSUo79qDJsIDmr40d/T+cq2T2QcmpoKfGMSdyeSRkZ2kAhH0g8KVBPnACmkrVfzxISmLHwYEI9Un/mNBQF/0fu0zBDmvn1R3u1nIqcwoXu3vQbzEfrnYzyP0PQe4W2/XX4eDbJhdNbNHoJ/M3Ig8z234QSp/EDR/5aEjAepGJCA81eX/FsTyO6l2np4b/G1/oxb7RFHlMZRN+CvMt3F2U9OjD7OCv2SXpGX4c96oPQlIPCX3SxRwcZdfPzHI2H4nVk6K/6zQIPAGqLrIqb053voTiTCu63jbPsekt6RIBMuFXxJXlupQgcNCjPxyb6Ehykm4N3iKShVyr6hAzCtseePfMnXXyKU9DjGpUhphYfKZ3YLkREvqSEqQYXVoyt4mYfUYeB74m+F7D9Z2giYF/GLbxlZsPEYboKrR2SSjXNTA=
    secret_access_key:
      secure: sruKlXThOD5+V8ANO8LmVMBlOfgBZH51sZeVgx/oOo6pXiOjLr9mLWT39B/90njGOuI4F+CTqUppqjBb3vaU9wF02pAo80/K5u1f9DRSt+expsCCOKcdZv6FfaqPAqNNyV6sCgL17s/SEA6ep2tFKpXOK8ElNCIWlEz7/jLPYAViYtCKSMAayJY7mAjakoe3gBtuRqUbEL/7vBBt6If9GAKx4pzgJnOTrOQqJi7tCFc3bKOGR9i2pgtZy/pe2LiKC4nfU+QjuMELV36AVlHycbU1me2dsfkm2O3TIelKMrM8Ijjqf8x5QPbjHQCVqLxd12x/XysgCLy1PIermLhzLba2QB3KKH/nz6dYfCA4Unubn5JhinlGa9YSykOhel/7K7eBAg4nOBS5UhmVs3stvGxKmLNXLNnThyIb1DuiNrDldvJ/uT/QObNU7Oy8gR3qDWCvFJ6x8lOeWRu5XPHaV6tBshpE+GNp4QQl8sVj2QH86Bv2+cgr9SYJUcXpWfJSPSuWNpEhJ0Obhx5gKF9ma+5bDpH8faTuZkcJUdsduGOgr+o0Vj3GVxd5gnmi51cGw6kWMSzXdl0RS+9xbhSGiDQfA2Se9Mua50OEYxmjt2QxYRLmP/onBafv+vGib08nPloD3R1JxBl0ugdKp3WuDYhPip+9n9erQWG+nRbPvWw=
    bucket: amos-deploy-dev
    key: latest.zip
    application: amos-app-dev
    deployment_group: amos-deployment-group
    region: eu-west-1
    wait-until-deployed: true
    on:
      branch: dev
  - provider: codedeploy
    access_key_id:
      secure: Yazy6j1OVxhrGC4mONSpSZFCXCiVB6YD6yhtZdNghTaNtz6z1aATrU6h0iRXAJXzt7B5H5PX09j0WQxS7Ds4b1bI3FNhmOQXFfrwBOeu/pZCzjSs2H+kVZzC5b7K+RLcF6oHQKPOEZQZH5z7sykwYxY+i/rVqBjsvCtfROkKQwlufUjtJ01RqrLh83aEsyFhDyuPf/sI9XuxrHOcgMUUbamr/WE0fG8fii0zdA3S1lGT4C2M0yD/FM9++vrO0rosSUo79qDJsIDmr40d/T+cq2T2QcmpoKfGMSdyeSRkZ2kAhH0g8KVBPnACmkrVfzxISmLHwYEI9Un/mNBQF/0fu0zBDmvn1R3u1nIqcwoXu3vQbzEfrnYzyP0PQe4W2/XX4eDbJhdNbNHoJ/M3Ig8z234QSp/EDR/5aEjAepGJCA81eX/FsTyO6l2np4b/G1/oxb7RFHlMZRN+CvMt3F2U9OjD7OCv2SXpGX4c96oPQlIPCX3SxRwcZdfPzHI2H4nVk6K/6zQIPAGqLrIqb053voTiTCu63jbPsekt6RIBMuFXxJXlupQgcNCjPxyb6Ehykm4N3iKShVyr6hAzCtseePfMnXXyKU9DjGpUhphYfKZ3YLkREvqSEqQYXVoyt4mYfUYeB74m+F7D9Z2giYF/GLbxlZsPEYboKrR2SSjXNTA=
    secret_access_key:
      secure: sruKlXThOD5+V8ANO8LmVMBlOfgBZH51sZeVgx/oOo6pXiOjLr9mLWT39B/90njGOuI4F+CTqUppqjBb3vaU9wF02pAo80/K5u1f9DRSt+expsCCOKcdZv6FfaqPAqNNyV6sCgL17s/SEA6ep2tFKpXOK8ElNCIWlEz7/jLPYAViYtCKSMAayJY7mAjakoe3gBtuRqUbEL/7vBBt6If9GAKx4pzgJnOTrOQqJi7tCFc3bKOGR9i2pgtZy/pe2LiKC4nfU+QjuMELV36AVlHycbU1me2dsfkm2O3TIelKMrM8Ijjqf8x5QPbjHQCVqLxd12x/XysgCLy1PIermLhzLba2QB3KKH/nz6dYfCA4Unubn5JhinlGa9YSykOhel/7K7eBAg4nOBS5UhmVs3stvGxKmLNXLNnThyIb1DuiNrDldvJ/uT/QObNU7Oy8gR3qDWCvFJ6x8lOeWRu5XPHaV6tBshpE+GNp4QQl8sVj2QH86Bv2+cgr9SYJUcXpWfJSPSuWNpEhJ0Obhx5gKF9ma+5bDpH8faTuZkcJUdsduGOgr+o0Vj3GVxd5gnmi51cGw6kWMSzXdl0RS+9xbhSGiDQfA2Se9Mua50OEYxmjt2QxYRLmP/onBafv+vGib08nPloD3R1JxBl0ugdKp3WuDYhPip+9n9erQWG+nRbPvWw=
    bucket: amos-deploy-dev
    key: latest.zip
    application: amos-app-master
    deployment_group: amos-deployment-group
    region: eu-west-1
    wait-until-deployed: true
    on:
      branch: master
